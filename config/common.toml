[common]
version = 1

[common.debug]
# Log level (debug, info, warn, error)
log_level = "info"

# Maximum number of log files to keep before rotation
max_logs_to_keep = 10
# Maximum number of lines per log file
max_log_lines = 5000

# Enable pprof debugging endpoints
enable_pprof = false
# Port for pprof HTTP server if enabled
pprof_port = 6060

[common.loki]
# Enable Grafana Loki integration
enabled = false
# Loki server URL (without /loki/api/v1/push suffix)
url = "http://localhost:3100"
# Maximum number of log entries per batch
batch_max_size = 100
# Maximum time to wait before sending a batch (in milliseconds)
batch_max_wait_ms = 1000
# Basic authentication (optional)
username = ""
password = ""

[common.loki.labels]
service = "rotector"
environment = "development"

[common.proxy]
# Default cooldown period in milliseconds for unspecified endpoints
default_cooldown = 5000
# Duration in milliseconds to mark a proxy as unhealthy after a timeout error
unhealthy_duration = 30000

# Proxy API endpoint URL
proxy_api_url = "https://example.com"
# Proxy API authentication key
proxy_api_key = ""

# Endpoint-specific cooldown periods in milliseconds
[common.proxy.endpoints]
get_friend_count = { pattern = "friends.roblox.com/v1/users/{id}/friends/count", cooldown = 5000 }
get_friends = { pattern = "friends.roblox.com/v1/users/{id}/friends", cooldown = 5000 }
find_friends = { pattern = "friends.roblox.com/v1/users/{id}/friends/find", cooldown = 5000 }
user_info = { pattern = "users.roblox.com/v1/users/{id}", cooldown = 5000 }
user_info_batch = { pattern = "users.roblox.com/v1/users", cooldown = 5000 }
user_favorite_games = { pattern = "games.roblox.com/v2/users/{id}/favorite/games", cooldown = 5000 }
user_games = { pattern = "games.roblox.com/v2/users/{id}/games", cooldown = 5000 }
user_outfits = { pattern = "avatar.roblox.com/v2/avatar/users/{id}/outfits", cooldown = 6000 }
user_outfits_details = { pattern = "avatar.roblox.com/v3/outfits/{id}/details", cooldown = 8000 }
user_groups = { pattern = "groups.roblox.com/v1/users/{id}/groups/roles", cooldown = 5000 }
user_inventory = { pattern = "inventory.roblox.com/v2/users/{id}/inventory", cooldown = 5000 }
thumbnail_batch = { pattern = "thumbnails.roblox.com/v1/batch", cooldown = 1000 }
cdn_thumbnails = { pattern = "tr.rbxcdn.com/30DAY-Avatar-{hash}-Png/{id}/{id}/Avatar/Webp/noFilter", cooldown = 1000 }

[common.roverse]
# Domain for the roverse proxy service (leave empty to disable)
domain = ""
# Secret key for authentication
secret_key = ""
# Maximum concurrent requests to roverse
max_concurrent = 100

# Proxy API endpoint URL
proxy_api_url = "https://example.com/"
# Proxy API authentication key
proxy_api_key = ""

[common.circuit_breaker]
# Maximum number of requests allowed to pass through when the circuit is half-open
max_requests = 1
# The cyclic period of the closed state for the circuit breaker to clear the internal counts
interval = 60
# The period of the open state after which the state of the circuit breaker becomes half-open
timeout = 30000

[common.retry]
# Maximum retry attempts
max_retries = 3
# Initial retry delay in milliseconds
delay = 4000
# Maximum retry delay in milliseconds
max_delay = 5000

[common.postgresql]
# Database hostname
host = "127.0.0.1"
# Database port
port = 5432
# Database username
user = "postgres"
# Database password
password = "postgres"
# Database name
db_name = "postgres"

# Maximum open connections
max_open_conns = 8
# Maximum idle connections
max_idle_conns = 8
# Connection lifetime in minutes
max_lifetime = 10
# Idle timeout in minutes
max_idle_time = 10

[common.redis]
# Redis hostname
host = "127.0.0.1"
# Redis port
port = 6379
# Redis username
username = ""
# Redis password
password = ""

[common.openai]
# OpenAI API configuration
base_url = "https://ai-gateway.vercel.sh/v1"
api_key = ""
max_concurrent = 100

# Model to use for user analysis
user_model = "gemini-2.5-flash"
# Model to use for user reason analysis
user_reason_model = "grok-4-fast"
# Model to use for friend reason analysis
friend_reason_model = "grok-4-fast"
# Model to use for group reason analysis
group_reason_model = "grok-4-fast"
# Model to use for outfit reason analysis
outfit_reason_model = "grok-4-fast"
# Model to use for category analysis
category_model = "grok-4-fast"
# Model to use for stats analysis
stats_model = "grok-4-fast"
# Model to use for outfit analysis
outfit_model = "gemini-2.5-flash"
# Model to use for message analysis
message_model = "grok-4-fast"

# Fallback model to use for user analysis when content is blocked
user_fallback_model = "grok-4-fast"
# Fallback model to use for user reason analysis when content is blocked
user_reason_fallback_model = "gpt-5-mini"
# Fallback model to use for friend reason analysis when content is blocked
friend_reason_fallback_model = "grok-4-fast"
# Fallback model to use for group reason analysis when content is blocked
group_reason_fallback_model = "grok-4-fast"
# Fallback model to use for outfit reason analysis when content is blocked
outfit_reason_fallback_model = "grok-4-fast"
# Fallback model to use for category analysis when content is blocked
category_fallback_model = "gpt-5-mini"
# Fallback model to use for stats analysis when content is blocked
stats_fallback_model = "gpt-5-mini"
# Fallback model to use for outfit analysis when content is blocked
outfit_fallback_model = ""
# Fallback model to use for message analysis when content is blocked
message_fallback_model = "gpt-5-mini"

# Model mappings for the provider
[common.openai.model_mappings]
"gemini-2.5-flash" = "google/gemini-2.5-flash"
"grok-4-fast" = "xai/grok-4-fast-non-reasoning"
"gpt-5-mini" = "openai/gpt-5-mini"

# Token pricing per model (cost per million tokens in USD)
[common.openai.model_pricing]
"gemini-2.5-flash" = { input = 0.30, completion = 2.50, reasoning = 2.50 }
"grok-4-fast" = { input = 0.20, completion = 0.50, reasoning = 0.50 }
"gpt-5-mini" = { input = 0.25, completion = 2.00, reasoning = 2.00 }

[common.discord]
# Self-bot tokens for server scanning
sync_tokens = []

# Primary verification service configuration
[common.discord.verification_service_a]
token = ""
guild_id = 0
channel_id = 0
command_name = ""

# Secondary verification service configuration
[common.discord.verification_service_b]
token = ""
guild_id = 0
channel_id = 0
command_name = ""
